<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocuChat RAG - Firebase</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <!-- Add SDKs for Firebase products you want to use -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    
    <!-- FirebaseUI for simple auth -->
    <script defer src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script> 
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
</head>
<body>
    <div id="app-container">
        <header>
            <h1>DocuChat RAG</h1>
            <div id="user-info" style="display:none;">
                <p>Logged in as: <span id="user-email"></span></p>
                <button id="logout-button" class="button-danger">Logout</button>
            </div>
        </header>

        <div id="firebaseui-auth-container"></div>
        
        <main id="app-content" style="display:none;">
            <section id="file-upload-section">
                <h2>Upload PDF Document</h2>
                <input type="file" id="pdf-file-input" accept=".pdf">
                <button id="upload-button" class="button-primary">Upload & Process PDF</button>
                <p id="upload-status" class="status-message"></p>
            </section>

            <section id="chat-section">
                <h2>Chat with Your Documents</h2>
                <div id="chat-history-container">
                    <div id="chat-history">
                        <!-- Chat messages will appear here -->
                    </div>
                </div>
                <div id="chat-input-area">
                    <textarea id="query-input" placeholder="Ask a detailed question about your documents..."></textarea>
                    <button id="send-button" class="button-primary">Send</button>
                </div>
            </section>

            <section id="controls-section">
                <h2>Controls</h2>
                <button id="clear-history-button">Clear Chat Display</button>,
                <button id="reset-data-button" class="button-danger">Reset My Backend Data</button>
                <p id="reset-status" class="status-message"></p>

                <div id="theme-selector-container">
                    <h3>Select Theme</h3>
                    <select id="theme-select">
                        <option value="theme-default">Default</option>
                        <option value="theme-sunset">Sunset</option>
                        <option value="theme-ocean">Ocean Breeze</option>
                        <option value="theme-forest">Forest Walk</option>
                        <option value="theme-plum">Plum Velvet</option>
                    </select>
                </div>
            </section>
        </main>

        <footer>
            <p>DocuChat RAG on Firebase</p>
        </footer>
    </div>

    <!-- ui.js and apiService.js are imported by app.js, so not directly included here -->
    <script type="module" defer src="auth.js"></script> 
    <script type="module" defer src="app.js"></script>   
</body>
</html>